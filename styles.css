/* ===== Theme (Neon Pink Dark) ===== */
:root{
  --bg:#f6f8ff; --panel:#fff; --text:#0b0d14; --muted:#4b5166;
  --accent:#ff0a82; --accent-2:#31ffd8;
  --line:#dfe6ff; --line-2:#cfd8ff;
  --shadow-sm:0 6px 18px rgba(9,13,40,.08);
  --shadow-md:0 12px 32px rgba(9,13,40,.12);
  --glow:0 0 18px rgba(255,10,130,.35), 0 0 36px rgba(49,255,216,.25);
  --radius:16px; --topbar-h:64px;

  /* BG động theo Rider (mặc định = Decade) */
  --page-bg: radial-gradient(1200px 700px at 50% -10%,#fff 0%,#f2f6ff 60%,#eaf0ff 100%);
  --page-bg-dark: radial-gradient(1200px 700px at 50% -10%, #101522 0%, #0c111b 60%, #0b0f19 100%);

  /* HERO IMG góc phải (mặc định Decade) */
  --hero-img: url(./assets/hero/decade.png);
  --hero-size: min(42vw, 520px);
  --hero-opacity: .14;
  --hero-offset-x: 2vw;
  --hero-offset-y: 2vh;
}

/* ===== Dark theme overrides ===== */
html[data-theme="dark"]{
  --bg:#0b0d14; --panel:#0f1117; --text:#e9efff; --muted:#a8b2c8;
  --line:#1b2238; --line-2:#273052;
  --shadow-sm:0 6px 18px rgba(0,0,0,.35);
  --shadow-md:0 12px 32px rgba(0,0,0,.45);
  --glow:0 0 18px color-mix(in oklab, var(--accent) 50%, #000 50%),
         0 0 36px color-mix(in oklab, var(--accent-2) 40%, #000 60%);

  /* hero tối đậm hơn chút */
  --hero-opacity: .18;
}
*,*::before,*::after{box-sizing:border-box}
html,body{
  height:100%; margin:0; color:var(--text);
  font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
  background: var(--page-bg) fixed;
  transition: background .35s ease;
}
html[data-theme="dark"] body{
  background: var(--page-bg-dark) fixed;
}

/* Ảnh Rider nền góc phải (không chặn click) */
body::after{
  content:"";
  position: fixed;
  right: var(--hero-offset-x);
  bottom: var(--hero-offset-y);
  width: var(--hero-size);
  height: var(--hero-size);
  background-image: var(--hero-img);
  background-repeat: no-repeat;
  background-size: contain;
  background-position: right bottom;
  opacity: var(--hero-opacity);
  pointer-events: none;
  z-index: 0;
  filter: drop-shadow(0 8px 18px rgba(0,0,0,.18));
  transform: translateZ(0);
}
/* đảm bảo nội dung/Topbar nổi phía trên ảnh nền */
.page{ position: relative; z-index: 1; }
.topbar{ position: sticky; z-index: 10; top: 0; }

/* Gate: ẩn UI cho tới khi xong hiệu ứng lần đầu */
html.henshin-gate body{ overflow:hidden; }
html.henshin-gate .topbar, html.henshin-gate .page{
  opacity:0; filter:blur(6px); pointer-events:none; user-select:none;
}
html:not(.henshin-gate) .topbar, html:not(.henshin-gate) .page{
  transition: opacity .35s ease, filter .35s ease;
}

/* ===== Topbar 3 cột: trái | logo giữa | phải ===== */
.topbar{
  height: var(--topbar-h);
  display: grid;
  grid-template-columns: 1fr auto 1fr;
  align-items: center;
  gap: 12px;
  padding: 0 16px;
  background: linear-gradient(180deg, #ffffff 0%, #f6f8ff 100%);
  border-bottom: 1px solid var(--line);
  box-shadow: var(--shadow-sm);
}
html[data-theme="dark"] .topbar{
  background: linear-gradient(180deg, #0f1117 0%, #0c1018 100%);
  border-bottom-color: var(--line);
}
.nav-left, .nav-right{ display:flex; gap:10px; }
.nav-left{ justify-content:flex-end; }
.nav-right{ justify-content:flex-start; }

/* Nút tab chung */
.tab-btn{
  background:#fff; color:#141827; border:1px solid var(--line);
  padding:10px 14px; border-radius:999px; cursor:pointer;
  transition: transform .15s, box-shadow .15s, background .2s, border-color .2s;
  box-shadow: var(--shadow-sm); font-weight:600;
  will-change: transform, box-shadow;
}
html[data-theme="dark"] .tab-btn{
  background: var(--panel); color: var(--text); border-color: var(--line);
}
.tab-btn:hover{ transform: translateY(-1px); box-shadow: var(--shadow-md); }
.tab-btn.is-active{
  background: linear-gradient(90deg, #fff, #f7fbff);
  border-color: var(--line-2);
  color:#0b0d14;
  box-shadow: 0 0 0 1px var(--line-2), var(--glow);
}
html[data-theme="dark"] .tab-btn.is-active{
  background: linear-gradient(90deg, #121826, #0f141f);
  color: var(--text);
}

/* Focus rõ ràng cho a11y */
.tab-btn:focus-visible,
.logo-item:focus-visible{
  outline: 2px solid var(--accent);
  outline-offset: 2px;
}

/* Logo giữa – lớn nhất */
.tab-logo{
  display:inline-grid; place-items:center;
  border:1px solid var(--line-2); border-radius:999px; background:#fff;
  box-shadow: 0 0 0 1px var(--line-2), var(--glow);
  padding: 8px 14px;
}
html[data-theme="dark"] .tab-logo{ background: var(--panel); }
.tab-logo img{
  width: clamp(44px, 6.2vmin, 72px); height:auto; display:block;
  filter: drop-shadow(0 0 12px rgba(255,10,130,.35)) drop-shadow(0 0 18px rgba(49,255,216,.25));
}

/* “Tam giác” kích thước */
.lvl-1{ transform: scale(1.00); }
.lvl-2{ transform: scale(0.92); }
.tab-btn.lvl-1:hover{ transform: translateY(-1px) scale(1.02); }
.tab-btn.lvl-2:hover{ transform: translateY(-1px) scale(0.96); }

/* ===== Rider Belt (quick themes + nav) ===== */
.belt-nav{
  position: sticky; top: calc(var(--topbar-h) + 6px); z-index: 9;
  display: grid; grid-auto-flow: column; gap:10px;
  align-items:center; justify-content:center;
  padding:10px; margin:10px auto 0; max-width:1000px;
  border:1px solid var(--line); border-radius:999px;
  background:linear-gradient(180deg,#fff,#f7fbff); box-shadow:var(--shadow-sm);
}
html[data-theme="dark"] .belt-nav{
  background:linear-gradient(180deg,#0f1117,#0c1118); border-color:var(--line); box-shadow:var(--shadow-sm);
}
.belt-chip{
  --sz:34px;
  width:var(--sz); height:var(--sz);
  border-radius:999px; border:1px solid var(--line);
  background:#fff; display:grid; place-items:center; cursor:pointer;
  box-shadow:var(--shadow-sm); transition:transform .15s, box-shadow .15s, border-color .15s;
}
html[data-theme="dark"] .belt-chip{ background:var(--panel); border-color:var(--line); }
.belt-chip .ink{
  width:20px; height:20px;
  -webkit-mask: var(--logo) center/contain no-repeat;
          mask: var(--logo) center/contain no-repeat;
  background: linear-gradient(135deg, var(--accent), var(--accent-2));
  filter: drop-shadow(0 0 6px rgba(255,10,130,.35));
}
.belt-chip:hover{ transform:translateY(-1px); box-shadow:var(--shadow-md); }
.belt-chip.is-active{ border-color:var(--line-2); box-shadow:0 0 0 1px var(--line-2), var(--glow); }
.belt-sep{
  width:1px; height:24px; background:var(--line); border-radius:10px;
  margin:0 2px;
}

/* ===== Content ===== */
.page{ padding:20px; max-width:1000px; margin:0 auto; }
.tab-panel{
  display:none;
  background:linear-gradient(180deg,#fff,#f9fbff);
  border:1px solid var(--line);
  border-radius:var(--radius);
  padding:24px;
  box-shadow:var(--shadow-md);
}
html[data-theme="dark"] .tab-panel{
  background: linear-gradient(180deg, #0f1117, #0c1118);
  border-color: var(--line);
  box-shadow: var(--shadow-sm);
}
.tab-panel.is-active{ display:block; animation: fadeIn .25s ease; }
@keyframes fadeIn{ from{opacity:0; transform: translateY(6px)} to{opacity:1; transform:none} }

/* =========================================================
   BANNER TRANG CHỦ
   ========================================================= */
.home-banner{
  position:relative; overflow:hidden;
  display:grid; grid-template-columns: 1.15fr .85fr; gap:16px;
  align-items:center;
  border:1px solid var(--line); border-radius:16px;
  padding:18px; margin-bottom:16px;
  background:
    linear-gradient(180deg, rgba(255,255,255,.88), rgba(255,255,255,.70)),
    linear-gradient(180deg,#fff,#f7fbff);
  box-shadow: var(--shadow-md);
  isolation:isolate;
  min-height: 30vh;
  max-height: 40vh;
}
html[data-theme="dark"] .home-banner{
  background:
    linear-gradient(180deg, rgba(18,22,34,.85), rgba(16,20,30,.70)),
    linear-gradient(180deg,#0f131e,#0c1119);
  border-color: var(--line);
  box-shadow: var(--shadow-sm);
}
/* sọc Decade */
.home-banner::before{
  content:""; position:absolute; inset:-2px; z-index:0; pointer-events:none;
  background:
    repeating-linear-gradient(90deg, rgba(255,10,130,.55) 0 8px, rgba(255,10,130,0) 8px 18px),
    repeating-linear-gradient(90deg, rgba(49,255,216,.32) 18px 20px, rgba(49,255,216,0) 20px 36px);
  filter: saturate(140%) drop-shadow(0 0 18px rgba(255,10,130,.35));
  opacity:.22;
  animation: bars-move 18s linear infinite;
  -webkit-mask: radial-gradient(70% 60% at 40% 50%, #000 65%, transparent 90%);
          mask: radial-gradient(70% 60% at 40% 50%, #000 65%, transparent 90%);
}
@keyframes bars-move{
  from{ background-position: 0 0, 0 0; }
  to{   background-position: 280px 0, 360px 0; }
}
.banner-left{ display:grid; gap:10px; align-content:center; z-index:1 }
.banner-title{ margin:0; font-size: clamp(22px, 3.4vw, 34px); line-height:1.05; font-weight:900; letter-spacing:.2px }
.banner-title span{ color: var(--accent); text-shadow: 0 0 18px rgba(255,10,130,.35) }
.banner-sub{ margin:4px 0 0; color:#3a4260 }
html[data-theme="dark"] .banner-sub{ color:#a8b2c8; }
.banner-actions{ display:flex; gap:10px; margin-top:6px }

/* ảnh Hero */
.banner-right{
  position:relative; z-index:1;
  display:flex; align-items:flex-end; justify-content:flex-end;
}
.banner-right img{
  height: clamp(160px, 28vh, 340px);
  max-width: 100%;
  object-fit: contain;
  filter: drop-shadow(0 0 16px rgba(255,10,130,.4)) drop-shadow(0 0 22px rgba(49,255,216,.3));
}

@media (max-width: 860px){
  .home-banner{ grid-template-columns: 1fr; text-align:center; }
  .banner-actions{ justify-content:center; }
  .banner-right{ justify-content:center; }
  .banner-right img{ height: clamp(160px, 24vh, 320px); }
}

/* =========================================================
   HOME – Danh mục khóa học
   ========================================================= */
.home-courses{ display:grid; gap:20px; margin-top:18px }
.card-grid{
  display:grid; gap:14px;
  grid-template-columns: repeat(auto-fit, minmax(220px,1fr));
}
.card-grid.home{ display:grid; gap:12px; grid-template-columns: repeat(2, 1fr); }
@media (min-width: 900px){ .card-grid.home{ grid-template-columns: repeat(3, 1fr); } }
@media (min-width: 1200px){ .card-grid.home{ grid-template-columns: repeat(4, 1fr); } }

.card{ padding:16px; border:1px solid var(--line); border-radius:14px; background:#fff; box-shadow:var(--shadow-sm); }
html[data-theme="dark"] .card{ background: var(--panel); border-color: var(--line); box-shadow: var(--shadow-sm); }

/* Thẻ khóa học */
.course-card{
  position:relative; overflow:hidden; border-radius:14px;
  background:
    linear-gradient(#fff,#fff) padding-box,
    radial-gradient(120% 140% at 80% -20%, rgba(255,10,130,.55), rgba(106,0,255,.28) 45%, rgba(0,0,0,0) 60%) border-box;
  border:1px solid transparent;
  box-shadow:0 6px 18px rgba(11,13,20,.10);
  transition:transform .2s ease, box-shadow .2s ease, filter .2s ease;
  display:flex; flex-direction:column;
  will-change: transform, filter;
}
html[data-theme="dark"] .course-card{
  background:
    linear-gradient(var(--panel),var(--panel)) padding-box,
    radial-gradient(120% 140% at 80% -20%, color-mix(in oklab, var(--accent) 45%, #000 55%), color-mix(in oklab,#6a00ff 35%, #000 65%) 45%, rgba(0,0,0,0) 60%) border-box;
  box-shadow: var(--shadow-sm);
}
.course-card:hover{
  transform:translateY(-3px);
  box-shadow:0 14px 36px rgba(11,13,20,.16), 0 0 0 1px rgba(255,10,130,.18) inset;
  filter:saturate(1.05);
}
.course-thumb{
  position:relative; aspect-ratio:16/9; overflow:hidden;
  border-bottom:1px solid var(--line);
  background:
    linear-gradient(135deg, rgba(255,10,130,.28), rgba(106,0,255,.24)),
    radial-gradient(60% 70% at 70% 0%, rgba(49,255,216,.20), transparent 60%);
  display:grid; place-items:center;
}
html[data-theme="dark"] .course-thumb{
  background:
    linear-gradient(135deg, color-mix(in oklab, var(--accent) 35%, #000 65%), color-mix(in oklab, #6a00ff 30%, #000 70%)),
    radial-gradient(60% 70% at 70% 0%, color-mix(in oklab, var(--accent-2) 25%, #000 75%), transparent 60%);
}
.course-thumb img{ width:100%; height:100%; object-fit:cover; display:block }
.course-thumb::before{
  content:""; position:absolute; inset:0;
  background:repeating-linear-gradient(90deg, rgba(255,10,130,.72) 0 10px, transparent 10px 20px);
  -webkit-mask: linear-gradient(90deg, #000 0 100%); mask: linear-gradient(90deg, #000 0 100%);
  opacity:.18; mix-blend-mode:screen; pointer-events:none;
}
.course-thumb::after{
  content:""; position:absolute; inset:-40% -10% auto -10%; height:60%;
  background:linear-gradient(100deg, rgba(255,255,255,0) 0%, rgba(255,255,255,.7) 45%, rgba(255,255,255,0) 90%);
  transform:skewX(-20deg) translateX(-60%); filter: blur(6px);
}
html[data-theme="dark"] .course-thumb::after{
  background:linear-gradient(100deg, rgba(255,255,255,0) 0%, rgba(255,255,255,.25) 45%, rgba(255,255,255,0) 90%);
}
.course-card:hover .course-thumb::after{ animation:sweep 1.1s ease }
@keyframes sweep{ to{ transform:skewX(-20deg) translateX(140%); } }

.course-body{ padding:8px 10px 10px; display:grid; gap:6px; background:#fff }
html[data-theme="dark"] .course-body{ background: var(--panel); }
.course-title{ font-weight:800; font-size:14px; line-height:1.25; color:#0b0d14 }
html[data-theme="dark"] .course-title{ color: var(--text); }

/* Ẩn chi tiết trên card (home) */
.course-info,
.course-meta,
.course-actions-row { display:none !important; }

/* ===== OVERLAY ===== */
.henshin-overlay{
  position:fixed; inset:0; display:grid; place-items:center; pointer-events:none;
  opacity:0; transform:scale(1.02); transition:opacity .25s,transform .25s;
  z-index: 1000;
}
.henshin-overlay.active{pointer-events:auto;opacity:1;transform:none}

/* Nền mờ neon */
.bg-frost{
  position:absolute; inset:0;
  background:
    linear-gradient(180deg,rgba(255,255,255,.72),rgba(255,255,255,.5)),
    repeating-linear-gradient(120deg,rgba(255,10,130,.12) 0 2px,transparent 2px 6px),
    repeating-linear-gradient(-120deg,rgba(49,255,216,.10) 0 2px,transparent 2px 6px);
  backdrop-filter: blur(8px) saturate(140%);
  border-top: 1px solid #ffffffa0;
}
html[data-theme="dark"] .bg-frost{
  background:
    linear-gradient(180deg,rgba(18,22,34,.70),rgba(16,20,30,.50)),
    repeating-linear-gradient(120deg,rgba(255,10,130,.10) 0 2px,transparent 2px 6px),
    repeating-linear-gradient(-120deg,rgba(49,255,216,.08) 0 2px,transparent 2px 6px);
  backdrop-filter: blur(8px) saturate(160%);
  border-top-color: rgba(255,255,255,.06);
}
.henshin-overlay.tab-mode .bg-frost{
  background:
    radial-gradient(26% 22% at 50% 50%, rgba(255,255,255,.95), rgba(255,255,255,0) 70%),
    radial-gradient(40% 40% at 50% 50%, rgba(255,10,130,.18), rgba(255,10,130,0) 60%),
    radial-gradient(35% 35% at 50% 50%, rgba(49,255,216,.14), rgba(49,255,216,0) 58%),
    repeating-linear-gradient(120deg,rgba(255,10,130,.16) 0 2px,transparent 2px 6px),
    repeating-linear-gradient(-120deg,rgba(49,255,216,.12) 0 2px,transparent 2px 6px),
    linear-gradient(180deg,rgba(255,255,255,.65),rgba(255,255,255,.45));
  backdrop-filter: blur(12px) saturate(180%);
}
html[data-theme="dark"] .henshin-overlay.tab-mode .bg-frost{
  background:
    radial-gradient(26% 22% at 50% 50%, rgba(22,26,40,.95), rgba(22,26,40,0) 70%),
    radial-gradient(40% 40% at 50% 50%, color-mix(in oklab, var(--accent) 25%, #000 75%), transparent 60%),
    radial-gradient(35% 35% at 50% 50%, color-mix(in oklab, var(--accent-2) 20%, #000 80%), transparent 58%),
    repeating-linear-gradient(120deg,rgba(255,10,130,.14) 0 2px,transparent 2px 6px),
    repeating-linear-gradient(-120deg,rgba(49,255,216,.10) 0 2px,transparent 2px 6px),
    linear-gradient(180deg,rgba(16,20,30,.65),rgba(16,20,30,.45));
}

/* Sequence viewer */
.seq{ position:absolute; inset:0; display:grid; place-items:center; pointer-events:none; z-index:6; }
.seq img{
  width:min(68vmin,960px);
  filter:drop-shadow(0 0 16px rgba(255,10,130,.45)) drop-shadow(0 0 28px rgba(49,255,216,.35));
}

/* Driver */
.decade-driver{
  position:absolute; inset:auto 0 9vh; margin:auto; width:clamp(260px,46vmin,620px); height:90px;
  background:linear-gradient(180deg,#fff,#f5f8ff);
  border:1px solid var(--line-2); border-radius:14px; display:grid; place-items:center;
  box-shadow:var(--shadow-md), var(--glow);
  cursor:pointer; user-select:none; isolation:isolate;
  transform:translateY(12px); opacity:0; pointer-events:none;
  transition:opacity .3s .2s, transform .3s .2s; z-index:3;
}
html[data-theme="dark"] .decade-driver{
  background: linear-gradient(180deg,#121826,#0f141f);
  border-color: var(--line-2);
  box-shadow: var(--shadow-sm), var(--glow);
}
.henshin-overlay.active .decade-driver{ opacity:1; pointer-events:auto; transform:none; }
.henshin-overlay.tab-mode .decade-driver{ display:none !important; }
.decade-driver .shell{ position:absolute; top:0; width:50%; height:100%; background:linear-gradient(180deg,#fdfdff,#eef3ff);
  border:1px solid var(--line-2); box-shadow: inset 0 -14px 32px rgba(10,16,40,.06), inset 0 10px 24px rgba(255,255,255,.8); z-index:1; }
html[data-theme="dark"] .decade-driver .shell{
  background: linear-gradient(180deg,#161b2a,#0f141f);
  border-color: var(--line-2);
  box-shadow: inset 0 -14px 32px rgba(0,0,0,.35), inset 0 10px 24px rgba(255,255,255,.05);
}
.decade-driver .shell.left{ left:0; border-radius:14px 0 0 14px; }
.decade-driver .shell.right{ right:0; border-radius:0 14px 14px 0; }
.decade-driver.open .shell.left{ animation:shellOpenL .55s ease forwards; }
.decade-driver.open .shell.right{ animation:shellOpenR .55s ease forwards; }
.decade-driver.close .shell.left{ animation:shellCloseL .45s ease forwards; }
.decade-driver.close .shell.right{ animation:shellCloseR .45s ease forwards; }
@keyframes shellOpenL{ to{ transform: translateX(-24%);} }
@keyframes shellOpenR{ to{ transform: translateX(24%);} }
@keyframes shellCloseL{ from{ transform: translateX(-24%);} to{ transform: translateX(0);} }
@keyframes shellCloseR{ from{ transform: translateX(24%);} to{ transform: translateX(0);} }
.core{
  position:relative; width:210px; height:64px; border-radius:12px; background:linear-gradient(180deg,#fff,#f5f8ff);
  border:1px solid var(--line-2); box-shadow: inset 0 0 0 1px #e8edff, 0 0 0 1px #e1e8ff, inset 0 0 24px rgba(255,10,130,.12);
  z-index:2; display:grid; place-items:center;
}
html[data-theme="dark"] .core{
  background: linear-gradient(180deg,#121826,#0f141f);
  border-color: var(--line-2);
  box-shadow: inset 0 0 0 1px #202944, 0 0 0 1px #1a2340, inset 0 0 24px color-mix(in oklab, var(--accent) 22%, #000 78%);
}
.slot{
  position:absolute; inset:10px 12px; border-radius:8px; background:#fff; border:1px solid var(--line);
  box-shadow: inset 0 0 0 2px #eef3ff, inset 0 0 28px rgba(49,255,216,.14);
}
html[data-theme="dark"] .slot{
  background:#0f141f; border-color:#1a2340;
  box-shadow: inset 0 0 0 2px #151d32, inset 0 0 28px color-mix(in oklab, var(--accent-2) 18%, #000 82%);
}
.pink-bars{
  position:absolute; inset:14px 36px;
  background: repeating-linear-gradient(90deg, var(--accent) 0 10px, transparent 10px 18px);
  -webkit-mask: linear-gradient(90deg,#000 0 100%); mask: linear-gradient(90deg,#000 0 100%);
  box-shadow: 0 0 16px rgba(255,10,130,.35), inset 0 0 18px rgba(255,10,130,.15);
  filter: saturate(140%);
}
.tap-hint{ position:absolute; bottom:-28px; left:50%; transform:translateX(-50%); font-size:12px; color:#3a4260; opacity:.9; }
html[data-theme="dark"] .tap-hint{ color:#a8b2c8; }

/* Toast */
.toast{ position:fixed; left:50%; bottom:24px; transform:translateX(-50%) translateY(16px); background:#fff; border:1px solid var(--line-2); color:#0b0d14;
  padding:10px 14px; border-radius:10px; box-shadow:var(--shadow-md); opacity:0; pointer-events:none; transition:opacity .2s, transform .2s; }
html[data-theme="dark"] .toast{ background: var(--panel); color: var(--text); border-color: var(--line); box-shadow: var(--shadow-sm); }
.toast.show{ opacity:1; transform:translateX(-50%) translateY(0) }

/* ===== Neon Flash + Logo ===== */
.flash{
  position:absolute; inset:0; pointer-events:none; opacity:0; z-index:8;
  background:
    radial-gradient(60% 60% at 50% 50%, rgba(255,255,255,.95) 0%, rgba(255,10,130,.60) 30%, rgba(255,10,130,0) 70%),
    radial-gradient(50% 50% at 50% 50%, rgba(49,255,216,.35), rgba(49,255,216,0) 60%);
  mix-blend-mode:screen;
}
html[data-theme="dark"] .flash{
  background:
    radial-gradient(60% 60% at 50% 50%, rgba(255,255,255,.25) 0%, color-mix(in oklab, var(--accent) 65%, #000 35%) 30%, rgba(255,10,130,0) 70%),
    radial-gradient(50% 50% at 50% 50%, color-mix(in oklab, var(--accent-2) 60%, #000 40%), rgba(49,255,216,0) 60%);
}
.flash.show{ animation:flash-pop 420ms ease forwards; }
@keyframes flash-pop{
  0%{ opacity:0; transform:scale(1) }
  15%{ opacity:1; transform:scale(1.02) }
  100%{ opacity:0; transform:scale(1.05) }
}
.decade-logo{
  position:absolute; inset:0; margin:auto;
  width:min(70vmin, 900px); height:auto;
  filter: drop-shadow(0 0 16px rgba(255,10,130,.45)) drop-shadow(0 0 28px rgba(49,255,216,.35));
  transform: scale(.96); opacity:0; pointer-events:none;
  transition: opacity .28s ease, transform .28s ease; z-index:7;
}
.decade-logo.show{ opacity:1; transform:none; }
.decade-logo.vanish{ animation:logo-vanish 420ms ease forwards; }
@keyframes logo-vanish{
  0%{ transform:scale(1) rotate(0turn); opacity:1; }
  100%{ transform:scale(.82) rotate(.15turn); opacity:0; }
}

/* Làm mờ UI khi chuyển tab */
body.tab-transitioning .topbar,
body.tab-transitioning .page{
  filter: blur(10px) saturate(120%);
  transition: filter .25s ease;
  pointer-events: none;
  user-select: none;
}

/* ====== Mobile bottom bar ====== */
@media (max-width: 760px){
  :root{ --topbar-h: 68px; }
  .topbar{
    position: fixed;
    top: auto; bottom: 0; left: 0; right: 0;
    border-top: 1px solid var(--line);
    border-bottom: none;
    padding-bottom: calc(env(safe-area-inset-bottom, 0px));
    backdrop-filter: blur(10px) saturate(160%);
  }
  html[data-theme="dark"] .topbar{ border-top-color: var(--line); }
  .page{ padding-bottom: calc(var(--topbar-h) + env(safe-area-inset-bottom, 0px) + 18px); }
  .tab-btn{ padding: 10px 12px; }
  .lvl-1{ transform: scale(0.98); }
  .lvl-2{ transform: scale(0.90); }
  .tab-logo img{ width: clamp(40px, 7vmin, 64px); }
  .henshin-overlay.active ~ .topbar{ pointer-events: none; }

  /* hero trên mobile nhỏ & mờ hơn */
  body::after{
    --hero-size: min(60vw, 320px);
    --hero-opacity: .12;
    --hero-offset-x: 1.5vw;
    --hero-offset-y: 1.5vh;
  }
}

/* ---------- Mosaic logo mờ ---------- */
.logo-mosaic{
  position:absolute; inset:0; z-index:0; opacity:.10;
  filter:blur(1px) saturate(120%);
  background: url(./assets/rider-logos/grid.png) center/auto 140% no-repeat;
  mix-blend-mode:luminosity;
}

/* ---------- Rider Picker (nếu dùng #rider-grid) ---------- */
.logo-grid{
  display:grid; gap:10px;
  grid-template-columns:repeat(auto-fill,minmax(88px,1fr));
}
.logo-chip{
  position:relative; border:1px solid var(--line); border-radius:12px; background:#fff;
  padding:14px; height:86px; display:grid; place-items:center; cursor:pointer;
  box-shadow:var(--shadow-sm);
  transition:transform .15s, box-shadow .15s, border-color .15s;
  will-change: transform, box-shadow;
}
html[data-theme="dark"] .logo-chip{ background: var(--panel); border-color: var(--line); }
.logo-chip:hover{ transform:translateY(-2px); box-shadow:var(--shadow-md); }
.logo-chip.is-active{ border-color:var(--line-2); box-shadow:0 0 0 1px var(--line-2), var(--glow); }
.logo-ink{
  width:64px; height:64px;
  -webkit-mask: var(--logo) center/contain no-repeat;
          mask: var(--logo) center/contain no-repeat;
  background: linear-gradient(135deg, var(--accent), var(--accent-2));
  filter: drop-shadow(0 0 10px rgba(255,10,130,.45)) drop-shadow(0 0 18px rgba(49,255,216,.32));
}

/* ---------- Badge logo trên thumbnail khóa học ---------- */
.logo-badge{
  position:absolute; left:8px; top:8px; width:28px; height:28px;
  -webkit-mask: var(--logo) center/contain no-repeat;
          mask: var(--logo) center/contain no-repeat;
  background: linear-gradient(135deg, var(--accent), var(--accent-2));
  filter: drop-shadow(0 0 6px rgba(255,10,130,.35));
  opacity:.95;
}

/* Bỏ gạch chân link dạng nút */
a.tab-btn, a.btn{ text-decoration:none; }

/* (tuỳ chọn) watermark logo theo Rider cho card đăng nhập */
:root{ --rider-logo: url(./assets/decade/decade-logo.png); }
.login-card::after{
  content:""; position:absolute; inset:auto -10% -10% auto; width:140px; height:140px; opacity:.08;
  -webkit-mask: var(--rider-logo) center/contain no-repeat;
          mask: var(--rider-logo) center/contain no-repeat;
  background: linear-gradient(135deg, var(--accent), var(--accent-2));
}

/* ===== Logo Gallery ===== */
.logo-section{
  background:linear-gradient(180deg,#fff,#f9fbff);
  border:1px solid var(--line);
  border-radius:16px;
  box-shadow:var(--shadow-md);
  padding:14px;
  margin-top:18px;
}
html[data-theme="dark"] .logo-section{
  background:linear-gradient(180deg,#0f1117,#0c1118);
  border-color: var(--line);
  box-shadow: var(--shadow-sm);
}
.logo-head{
  display:flex; justify-content:space-between; align-items:center;
  margin-bottom:12px;
}
.logo-actions .btn.sm{ padding:6px 10px; font-size:13px; border-radius:10px; }
.logo-actions .btn.is-active{ border-color:var(--line-2); box-shadow:0 0 0 1px var(--line-2), var(--glow); }

.logo-grid{
  display:grid; gap:14px;
  grid-template-columns:repeat(auto-fill,minmax(120px,1fr));
}
.logo-item{
  display:grid; place-items:center; gap:6px;
  padding:12px; border:1px solid var(--line); border-radius:14px;
  background:#fff; box-shadow:var(--shadow-sm);
  transition:transform .2s, box-shadow .2s, filter .2s;
  cursor:pointer;
  will-change: transform, filter;
}
html[data-theme="dark"] .logo-item{ background:#0f1117; border-color: var(--line); }
.logo-item:hover{
  transform:translateY(-3px);
  box-shadow:0 14px 36px rgba(11,13,20,.16),0 0 0 1px rgba(255,10,130,.18) inset;
  filter:saturate(1.06);
}
.logo-item:active{ transform: translateY(-1px) scale(.995); }
.logo-item img{ height:84px; max-width:100%; object-fit:contain; display:block; }
.logo-item figcaption{ font-size:13px; color:#3a4260; }
html[data-theme="dark"] .logo-item figcaption{ color:#a8b2c8; }

/* ===== Rider Info Modal (long-press) ===== */
.rider-modal[hidden]{ display:none !important; }
.rider-modal{ position:fixed; inset:0; z-index:1100; }
.rider-modal__backdrop{
  position:absolute; inset:0;
  background: rgba(3,6,20,.45);
  backdrop-filter: blur(8px) saturate(140%);
}
html[data-theme="dark"] .rider-modal__backdrop{
  background: rgba(3,6,20,.6);
  backdrop-filter: blur(10px) saturate(160%);
}
.rider-modal__dialog{
  position:absolute; inset:auto 0 0 0; margin:auto;
  width:min(680px, calc(100% - 28px));
  transform: translateY(24px);
  border:1px solid var(--line); border-radius:18px;
  background:linear-gradient(180deg,#fff,#f7fbff);
  box-shadow: var(--shadow-md), var(--glow);
  padding:18px;
  animation: modalIn .22s ease;
}
@keyframes modalIn{ from{ opacity:0; transform:translateY(36px)} to{ opacity:1; transform:translateY(24px)} }
html[data-theme="dark"] .rider-modal__dialog{
  background:linear-gradient(180deg,#0f1117,#0c1118);
  border-color: var(--line);
  box-shadow: var(--shadow-sm), var(--glow);
}
.rider-modal__close{
  position:absolute; top:8px; right:10px;
  border:1px solid var(--line); background:transparent; color:var(--text);
  width:32px; height:32px; border-radius:999px; cursor:pointer;
}
.rider-modal__head{
  display:flex; gap:12px; align-items:center; margin-bottom:8px;
  border-bottom:1px dashed var(--line); padding-bottom:10px;
}
.rider-modal__logo{
  --sz:56px; width:var(--sz); height:var(--sz);
  -webkit-mask: var(--logo) center/contain no-repeat;
          mask: var(--logo) center/contain no-repeat;
  background: linear-gradient(135deg, var(--accent), var(--accent-2));
  filter: drop-shadow(0 0 8px rgba(255,10,130,.35));
}
.rider-modal__title{ margin:0; font-size:20px; }
.rider-modal__subtitle{ margin:2px 0 0; color:var(--muted); }
html[data-theme="dark"] .rider-modal__subtitle{ color:#a8b2c8; }
.rider-meta{
  display:grid; grid-template-columns: 1fr 1fr; gap:12px; margin:10px 0;
  font-size:14px;
}
.rider-meta dt{ color:var(--muted); }
.rider-meta dd{ margin:0; font-weight:600; }
.rider-modal__desc{ margin:6px 0 0; line-height:1.55; }
@media (max-width: 620px){
  .rider-meta{ grid-template-columns: 1fr; }
}

/* ===== Respect reduced motion ===== */
@media (prefers-reduced-motion: reduce){
  *{ animation: none !important; transition: none !important; }
}
